dist: bionic

language: bash

services:
- docker

addons:
    apt:
      packages:
      - wget

env:
    global:
        - CONTAINER="jrromb/img-bakery"

script:
  - set -e # less forgiving
  - echo "BUILDING $CONTAINER"
  - | 
    docker build -t $CONTAINER .
    docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
    docker push $CONTAINER
    docker logout
    wget https://raw.githubusercontent.com/jrrombaldo/containers/master/update_dockerhub_desc.sh
  
    sh ./update_dockerhub_desc.sh
